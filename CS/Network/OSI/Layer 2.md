### Data Link Layer(Level 2)
두 개의 노드 사이에 신뢰성 있는 정보의 링크를 만들어 주는 역할, **단위는 Frame단위**
* 흐름 제어, 오류 검출 및 복구, 매체 다중화의 역할 수행

* 스위칭 허브(Switching Hub)
	* 연결 장치간 스위칭 역할 수행
	* 하나의 LAN을 여러 병렬회선 형태로 세그먼트화
	* 스위칭 허브 + 유무선 공유기 => iptime같은..
* 브릿지(Bridge)
	* 복수의 LAN을 서로 연결하기 위해 이용
	* 전체 네트워크 노드 수 및 거리 확장

* 이더넷(Ethernet) - IEEE 802.3
	* 모든 장치는 고유의 MAC(Media Access Controll)주소를 가짐
		* MAC은 인터넷을 할 수 있는 기기에 하나씩 할당되어 있는 고유한 ID
		* ex.  A4-68-B6-43-3D-56
	* 데이터 전송에 있어 발생하는 충돌(collision)을 감지하고 제어하는 기법을 정의(다중 접속 제어) - 이더넷의 중요한 역할
		* 제어방법 1
			* 스위치 허브 활용해서 복수 링크가 각각 독립적인 링크인 것처럼 만들어준다.
		* 제어방법 2
			* 이더넷 프로토콜을 따라 다중접속제어 기법을 따른다.
* 와이파이 - IEEE 802.11(Wireless Ethernet이라고도 부름)
	* 이더넷과 동일한 형태의 MAC 주소 사용
	* 주로 2.4Ghz, 5Ghz 주파수를 가지는 무선 통신 이용
	* 여기선 충돌을 감지하고 제어할 순 없어서 회피하는 방법을 이용한다.
	
	
* 같은 매체를 여러 노드들이 공유하고 있다. 이 매체를 노드들이 나눠서 써야함.
* 나누지 않으려면 각각 전용 회선을 놔야한다. 하지만 유선인 경우 많은 선을 놔야함. 무선인 경우 주파수 대역을 전부 다르게 써야한다. 이렇게 하는건 모두 비경제적.
* **데이터링크 레이어에선 다중 접근 제어를 사용하여 노드들이 같은 매체를 공유하지만 마치 독립적인 매체를 가지고 있는 것처럼 동작하게함.(보통 시간을 나누는 방식을 사용) 따라서 신뢰성 있는 데이터 링크를 이용할 수 있도록 함.** 데이터 링크의 중요한 역할

* 이더넷의 **다중 접근 제어**
	* CSMA/CD(Carrier-Sense Multiple Access with Collision Detection)
	* 노드(호스트)는 데이터 전송 이전에 회선이 사용중인지 점검
	* 회선이 사용중이면 임의의 시간만큼 기다린 뒤 다시 시도
	* 회선이 사용중이 아님이 확인되면 데이터 전송 시작
	* 데이터 전송 중 충돌이 검출되면 충돌 발생 사실을 모든 노드에게 통보
		* 충돌 발생 이후에도 일부 호스트가 계속 데이터 전송하는 것 방지하기 위해
		* 각 호스트가 임의의 시간 대기 후 재전송 시도를 위해
	* 충돌이 발생하면 **임의의 시간동안 대기**(Exponential backoff)한 후 다시 시도
		* Exponential backoff
			* 충돌이 발생해서 조금 기다렸다가 다시 시도했을 때 계속 충돌이 날 가능성이 있음. 특히 데이터를 보내고자 하는 호스트들이 많을 수록 더욱.
			* 따라서 기다리는 시간을 1 -> 3 -> 9 -> 27 이런식으로 지수적으로 증가하는 방식으로 대기시간 알고리즘을 구성한다.
	* 유선LAN에서 사용되고 있는 Media Access Control 방식이다.
	
* 무선 랜의 다중 접근 제어
	* CSMA/CA ('' with Collision Avoidance)
		* 무선랜은 충돌 감지/제어하긴 힘들어서 회피하는 방식 사용
		* RTS(Request To Send)와 CTS(Clear To Send)를 이용하여 어느 순간이든 허락된 한 쌍의 노드들 사이에만 데이터 전송이 이루어지도록 함.
			

* 흐름 제어(데이터링크 담당)
	* 슬라이딩 윈도우(sliding window) 프로토콜(흐름제어 프로토콜 중 하나)
		- 송신 측에서는 매 프레임에 순차 번호를 매김
		- 순차 번호 및 오류 검출 코드 등을 프레임에 표기하고 순서대로 전송
		- 수신 측에서는 매 프레임에 대한 응답(ack)프레임으로 회신
		- 슬라이딩 윈도우 - 송신 측에서 응답을 받지 않고도 연속하여 전송할 수 있는 프레임 개수에 대한 제한
		- 응답을 받지 못한(또는 명시적 재전송 요청을 받은)프레임은 재전송한다.
		
	- **이렇게 함으로써 보내는 쪽에서 무조건 밀어넣는 것을 막을 수 있음, 또한 받아들이는 쪽이 받아들이는 속도보다 빠르게 보내는 경우 받는 쪽이 못받는다. 따라서 보내는 쪽과 받는 쪽 중간에서 흐름 제어를 하는 것이 데이터 링크의 역할**
- 오류 검출
	- 패리티 비트(Parity Bit)
		- 가장 간단한 형태의 오류 검출 코드
		- 매 N개의 비트마다 패리티 비트(1-bit)를 붙여서 보냄으로 오류 확인 가능
		- ex. 실제 전송하고자 하는 8개 비트가 있다면 8비트 중 1의 갯수가 짝수이면 parity bit는 0, 홀수이면 1 이런 식으로 붙여 보낸다.
		- 2개 이상 비트가 오류가 나면? -> 패리티 비트는 전송하고자 하는 N개의 비트 + 패리티 비트에서 1개의 오류까지만 검출이 가능함. 이유는 위의 알고리즘 때문.
	- 오류 검출 확률을 높이기 위해서는? -> 체크섬(checksum)
	- 체크섬
	
	* 더 좋은 오류 검출 방법도 있음
		* ecc(error correction code), crc(c-clip redundency code)